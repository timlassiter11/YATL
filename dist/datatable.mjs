var le=Object.defineProperty;var Yt=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var te=h=>{throw TypeError(h)};var Qt=(h,e,r)=>e in h?le(h,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[e]=r,Q=(h,e)=>{for(var r in e||(e={}))de.call(e,r)&&Qt(h,r,e[r]);if(Yt)for(var r of Yt(e))he.call(e,r)&&Qt(h,r,e[r]);return h};var At=(h,e,r)=>e.has(h)||te("Cannot "+r);var t=(h,e,r)=>(At(h,e,"read from private field"),r?r.call(h):e.get(h)),o=(h,e,r)=>e.has(h)?te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(h):e.set(h,r),a=(h,e,r,s)=>(At(h,e,"write to private field"),s?s.call(h,r):e.set(h,r),r),c=(h,e,r)=>(At(h,e,"access private method"),r);var zt=(h,e,r,s)=>({set _(i){a(h,e,i,r)},get _(){return t(h,e,s)}});var at,F,k,et,V,$,lt,W,G,dt,ht,ct,R,tt,ee,nt=class nt{constructor({container:e,element:r,generator:s,nodePadding:i=2}){o(this,R);o(this,F);o(this,k);o(this,et);o(this,V,0);o(this,$,0);o(this,lt,2);o(this,W,0);o(this,G,!1);o(this,dt,0);o(this,ht,()=>{t(this,F).scrollTop!==t(this,dt)&&(a(this,dt,t(this,F).scrollTop),t(this,W)&&cancelAnimationFrame(t(this,W)),a(this,W,requestAnimationFrame(()=>c(this,R,tt).call(this))))});o(this,ct,()=>{c(this,R,tt).call(this)});a(this,F,e),a(this,k,r),a(this,et,s),a(this,lt,i)}get rowCount(){return t(this,V)}set rowCount(e){a(this,V,e),c(this,R,tt).call(this)}get rowHeight(){return t(this,$)||c(this,R,ee).call(this),t(this,$)}get started(){return t(this,G)}scrollTo(e){if(e<0||e>=t(this,V))throw new RangeError("Index out of bounds.");t(this,F).scrollTop=this.rowHeight*e,c(this,R,tt).call(this)}start(){t(this,G)||(a(this,G,!0),t(this,F).addEventListener("scroll",t(this,ht)),window.addEventListener("resize",t(this,ct)),c(this,R,tt).call(this))}stop(){t(this,W)&&cancelAnimationFrame(t(this,W)),t(this,F).removeEventListener("scroll",t(this,ht)),window.removeEventListener("resize",t(this,ct)),a(this,G,!1)}};at=new WeakMap,F=new WeakMap,k=new WeakMap,et=new WeakMap,V=new WeakMap,$=new WeakMap,lt=new WeakMap,W=new WeakMap,G=new WeakMap,dt=new WeakMap,ht=new WeakMap,ct=new WeakMap,R=new WeakSet,tt=function(){let e=t(this,F).scrollTop,r=this.rowCount,s=this.rowHeight,i=t(this,lt),n=s*r;t(this,k).innerHTML=`<tr style="height: ${n}px;"></tr>`;let m=t(this,k).offsetHeight,d=t(this,F).offsetHeight;if(!t(nt,at)&&m<Math.round(n-1)&&(a(nt,at,!0),console.error("Max element height exceeded. Virtual scroll may not work.")),!r||!s)return;let C=Math.floor(e/s)-i;C=Math.max(0,C);let b=Math.ceil(d/s)+2*i;b=Math.min(r-C,b);let g=C*s,y=n-(g+b*s);try{t(this,k).innerHTML="";let w=new Array(b).fill(null).map((U,yt)=>t(this,et).call(this,yt+C)),N=document.createElement("tr"),it=document.createElement("tr");N.style.height=g+"px",it.style.height=y+"px",t(this,k).append(N),t(this,k).append(...w),t(this,k).append(it)}catch(w){w instanceof RangeError&&console.log(w)}},ee=function(){if(t(this,V)===0){a(this,$,0);return}let e=Math.min(1e3,t(this,V)),r=[];for(let s=0;s<e;++s)r.push(t(this,et).call(this,s));if(t(this,k).innerHTML="",t(this,k).append(...r),a(this,$,t(this,k).offsetHeight/e),t(this,$)<=0)throw new ot("First 1000 rows had no rendered height. Virtual scroll can't be used.");t(this,$)*t(this,V)>33554400&&console.warn("Virtual scroll height exceeded maximum known element height.")},o(nt,at,!1);var Lt=nt,ot=class extends Error{constructor(e){super(e)}};var P=h=>{if(typeof h=="string")return h.split(" ");if(Array.isArray(h))return h;if(h==null)return[];throw new TypeError("classes must be string or array of strings")},jt=h=>h.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,e=>e.toUpperCase()),re=h=>String(h).toLowerCase().replace(/[^\w\s]/g," ").trim().split(/\s+/);var p,A,L,Nt,S,f,X,E,x,z,gt,st,H,j,Ct,K,pt,bt,vt,T,O,l,Dt,Vt,ie,ut,ne,St,rt,mt,oe,$t,ft,Tt,Et,wt,Ot,Ft,xt,Ht,Mt,Rt,_t,_=class _{constructor(e,{formatter:r,columns:s=[],data:i,virtualScroll:n=1e3,highlightSearch:m=!0,resizable:d=!0,rearrangeable:C=!1,extraSearchFields:b,noDataText:g,noMatchText:y,classes:w,tokenizer:N}={}){o(this,l);o(this,p);o(this,A);o(this,L);o(this,Nt);o(this,S);o(this,f,{});o(this,X,[]);o(this,E,[]);o(this,x);o(this,z);o(this,gt,[]);o(this,st);o(this,H);o(this,j,1e3);o(this,Ct,!0);o(this,K,re);o(this,pt,0);o(this,bt,"No records found");o(this,vt,"No matching records found");o(this,T,{scroller:"dt-scroller",thead:"dt-headers"});o(this,O,null);o(this,Tt,e=>{e.preventDefault(),e.stopPropagation();let s=e.target.closest("th");if(!s)return;let i=s.dataset.dtField;if(!i)return;let n=t(this,f)[i];n&&(a(this,O,n),n.resizeStartX=e.clientX,n.resizeStartWidth=s.offsetWidth,document.addEventListener("mousemove",t(this,Et)),document.addEventListener("mouseup",t(this,wt)))});o(this,Et,e=>{if(!t(this,O))return;e.preventDefault();let r=t(this,O).resizeStartWidth+(e.clientX-t(this,O).resizeStartX);t(this,O).element.style.width=`${r}px`});o(this,wt,e=>{t(this,O)&&(document.removeEventListener("mousemove",t(this,Et)),document.removeEventListener("mouseup",t(this,wt)),t(this,p).dispatchEvent(new CustomEvent(_.Events.COL_RESIZE,{detail:{column:t(this,O),width:t(this,O).element.offsetWidth},bubbles:!0,cancelable:!0})),a(this,O,null))});o(this,Ot,e=>{let s=e.target.closest("th");s&&(s.style.width="0px")});o(this,Ft,e=>{let s=e.target.dataset.dtField;console.log("dragColumnStart",s),e.dataTransfer&&s&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",s))});o(this,xt,e=>(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1));o(this,Ht,e=>{e.target.classList.add("dt-drag-over")});o(this,Mt,e=>{e.target.classList.remove("dt-drag-over")});o(this,Rt,e=>{var C;let r=(C=e.dataTransfer)==null?void 0:C.getData("text/plain"),i=e.currentTarget.dataset.dtField;if(!r||!i)return;e.preventDefault(),e.stopPropagation();let n=Object.values(t(this,f)),m=n.findIndex(b=>b.field===r),d=n.findIndex(b=>b.field===i);if(m>-1&&d>-1){let[b]=n.splice(m,1);n.splice(d,0,b),a(this,f,Object.fromEntries(n.map(y=>[y.field,y])));let g=n[n.length-1];g&&g.element&&(g.element.style.width=""),c(this,l,rt).call(this),c(this,l,mt).call(this),t(this,p).dispatchEvent(new CustomEvent(_.Events.COL_REARRANGE,{detail:{draggedColumn:b,dropColumn:t(this,f)[i],columns:n},bubbles:!0,cancelable:!0}))}});o(this,_t,e=>{let r=document.querySelectorAll(".dt-drag-over");for(let s of r)s.classList.remove("dt-drag-over")});var Wt,Pt,Xt,Zt,Bt,Ut,qt;if(typeof e=="string"){let u=document.querySelector(e);if(!u)throw new SyntaxError(`Failed to find table using selector ${e}`);a(this,p,u)}else a(this,p,e);if(!(t(this,p)instanceof HTMLTableElement))throw new TypeError("Invalid table element type. Must be HTMLTableElement");if(!Array.isArray(s))throw new TypeError("columns must be a list of columns");a(this,K,N||t(this,K)),a(this,Ct,m),a(this,gt,b||[]),a(this,bt,g||"No records found"),a(this,vt,y||"No matching records found"),a(this,T,Q(Q({},t(this,T)),w)),a(this,st,r),t(this,p).classList.add("data-table"),a(this,S,document.createElement("div")),t(this,S).classList.add(...P(t(this,T).scroller)),t(this,S).style.overflow="auto",t(this,S).style.height="100%",t(this,p).style.height!==""&&(t(this,S).style.height=t(this,p).style.height,t(this,p).style.height=""),(Wt=t(this,p).parentElement)==null||Wt.insertBefore(t(this,S),t(this,p)),t(this,S).append(t(this,p)),t(this,p).querySelectorAll("thead").length>1&&console.warn("Multiple theads found in table. Using last one."),t(this,p).querySelectorAll("tbody").length>1&&console.warn("Multiple tbodys found in table. Using first one.");let it=t(this,p).querySelector("thead:last-of-type");it?a(this,A,it):(a(this,A,document.createElement("thead")),t(this,p).insertBefore(t(this,A),t(this,p).firstChild)),t(this,A).classList.add(...P(t(this,T).thead));let U=t(this,A).querySelector("tr:last-of-type");U||(U=document.createElement("tr"),t(this,A).append(U)),U.classList.add(...P(t(this,T).tr)),U.innerHTML="";let yt=t(this,p).querySelector("tbody:first-of-type");yt?a(this,L,yt):(a(this,L,document.createElement("tbody")),t(this,p).append(t(this,L))),t(this,L).classList.add(...P(t(this,T).tbody)),t(this,L).addEventListener("click",u=>{let M,v,q;if(u.target instanceof HTMLTableCellElement?(v=u.target,M=v.parentElement,q=v.dataset.dtField):u.target instanceof HTMLTableRowElement&&(M=u.target),M){let kt=parseInt(M.dataset.dtIndex||"");if(!isNaN(kt)){let I=t(this,E)[kt],Gt=new CustomEvent(_.Events.ROW_CLICK,{detail:{row:I,index:kt,field:q},bubbles:!0,cancelable:!0});M.dispatchEvent(Gt)}}});let It=!1;for(let u of s){let M={field:u.field,title:u.title||jt(u.field),element:document.createElement("th"),visible:(Pt=u.visible)!=null?Pt:!0,sortable:(Xt=u.sortable)!=null?Xt:!1,searchable:(Zt=u.searchable)!=null?Zt:!1,tokenize:(Bt=u.tokenize)!=null?Bt:!1,sortOrder:(Ut=u.sortOrder)!=null?Ut:null,sortPriority:(qt=u.sortPriority)!=null?qt:0,resizeStartWidth:null,resizeStartX:null,valueFormatter:u.valueFormatter,elementFormatter:u.elementFormatter,comparatorCallback:u.sorter,filterCallback:u.filter,sortValueCallback:u.sortValue};t(this,f)[u.field]=M;let v=M.element;v.classList.add(...P(t(this,T).th)),v.dataset.dtField=u.field;let q=document.createElement("div");if(q.classList.add("dt-header-name"),q.innerText=u.title||jt(u.field),v.innerHTML="",v.append(q),v.hidden=!M.visible,U.append(v),M.visible&&(It=!0),u.sortable&&(v.classList.add("dt-sortable"),q.addEventListener("click",I=>{var Jt;let Kt=(Jt=I.target.closest("th"))==null?void 0:Jt.dataset.dtField;if(!Kt)return;let Y=t(this,f)[Kt];Y.sortOrder?Y.sortOrder==="asc"?this.sort(Y.field,"desc"):Y.sortOrder&&this.sort(Y.field,null):this.sort(Y.field,"asc")})),u.resizable===void 0?d:u.resizable){let I=document.createElement("div");I.classList.add("dt-resizer"),I.addEventListener("mousedown",t(this,Tt)),I.addEventListener("dblclick",t(this,Ot)),v.append(I)}typeof u.width=="number"?v.style.width=u.width+"px":typeof u.width=="string"&&(v.style.width=u.width),C&&(v.draggable=!0,v.addEventListener("dragstart",t(this,Ft)),v.addEventListener("dragenter",t(this,Ht)),v.addEventListener("dragover",t(this,xt)),v.addEventListener("dragleave",t(this,Mt)),v.addEventListener("drop",t(this,Rt)),v.addEventListener("dragend",t(this,_t)))}Object.keys(t(this,f)).length===0?console.warn("No columns found. At least one column is required."):It||(console.warn("At least a single column must be visible. Showing the first column."),this.showColumn(Object.keys(t(this,f))[0])),a(this,H,new Lt({container:t(this,S),element:t(this,L),generator:u=>c(this,l,$t).call(this,u)})),this.virtualScroll=n,this.loadData(i||[])}get columnStates(){return Object.values(t(this,f)).map(e=>({field:e.field,title:e.title,visible:e.visible,sortOrder:e.sortOrder,sortPriority:e.sortPriority,width:e.element.style.width}))}set columnStates(e){var r,s,i,n;for(let m of e){let d=t(this,f)[m.field];if(!d){console.warn(`Attempting to restore state for non-existent column ${m.field}`);continue}d.visible=(r=m.visible)!=null?r:d.visible,d.sortOrder=(s=m.sortOrder)!=null?s:d.sortOrder,d.sortPriority=(i=m.sortPriority)!=null?i:d.sortPriority,d.element.style.width=(n=m.width)!=null?n:d.element.style.width}this.refresh()}get rows(){return t(this,E)}get length(){return t(this,E)?t(this,E).length:0}get table(){return t(this,p)}get virtualScroll(){return t(this,j)===Number.MAX_VALUE?!0:t(this,j)===0?!1:t(this,j)}set virtualScroll(e){typeof e=="number"?a(this,j,e):e?a(this,j,0):a(this,j,Number.MAX_VALUE),c(this,l,mt).call(this)}get virtualScrollStatus(){return t(this,H).started}loadData(e){if(Array.isArray(e)&&e.length>0){let r=0;for(let s of e){let i={index:r++};s._metadata=i;for(let n of Object.keys(t(this,f))){let m=t(this,f)[n],d=c(this,l,ft).call(this,s,n);typeof m.sortValueCallback=="function"?i[`_${n}_sort`]=m.sortValueCallback(d):typeof d=="string"?i[`_${n}_sort`]=d.toLocaleLowerCase():i[`_${n}_sort`]=d,m.searchable&&m.tokenize&&d&&(i[`_${n}_tokens`]=[d,...t(this,K).call(this,d)])}}a(this,X,e),a(this,E,e)}else a(this,X,[]),a(this,E,[]);c(this,l,rt).call(this),c(this,l,ut).call(this)}showMessage(e,r){Array.isArray(r)?r=r.join(" "):typeof r!="string"&&(r="");let s=Object.keys(t(this,f)).length;t(this,L).innerHTML=`<tr class="${r}"><td colSpan=${s}>${e}</td></tr>`}search(e){a(this,x,e!==""?e:null),c(this,l,ut).call(this)}filter(e){if(typeof e!="object"&&typeof e!="function")throw new TypeError("filters must be object or function");a(this,z,e),c(this,l,ut).call(this)}sort(e,r){let s=t(this,f)[e];if(!s){console.warn(`Attempting to sort non-existent column ${e}`);return}r!=s.sortOrder&&(r==="asc"||r==="desc"?s.sortPriority===Number.MAX_VALUE&&(s.sortPriority=zt(this,pt)._++):(s.sortPriority=Number.MAX_VALUE,zt(this,pt)._--),s.sortOrder=r),c(this,l,rt).call(this),c(this,l,St).call(this);let i=new CustomEvent(_.Events.COL_SORT,{detail:{column:s,order:s.sortOrder},bubbles:!0,cancelable:!0});t(this,p).dispatchEvent(i)}setColumnVisibility(e,r){let s=t(this,f)[e];if(!s){console.warn(`Attempting to ${r?"show":"hide"} non-existent column ${e}`);return}s.visible=r,c(this,l,rt).call(this),c(this,l,St).call(this);let i=r?_.Events.COL_SHOW:_.Events.COL_HIDE,n=new CustomEvent(i,{detail:{column:s,visible:r},bubbles:!0,cancelable:!0});t(this,p).dispatchEvent(n)}showColumn(e){this.setColumnVisibility(e,!0)}hideColumn(e){this.setColumnVisibility(e,!1)}export(e,r=!1){let s=r?t(this,X):t(this,E);if(s.length===0)return;let i=Object.keys(s[0]).filter(b=>b in t(this,f)?r?!0:t(this,f)[b].element.hidden===!1:!1),n=s.map(b=>{let g=[];for(let[y,w]of Object.entries(b))if(y in t(this,f)){let N=t(this,f)[y];(r||!N.element.hidden)&&(typeof N.valueFormatter=="function"&&(w=N.valueFormatter(w,b)),w=String(w).replace('"','""'),g.push(`"${w}"`))}return g.join(",")}).join(`
`),m=i+`
`+n,d=new Blob([m],{type:"text/csv;charset=utf-8,"}),C=document.createElement("a");C.style.display="none",C.href=URL.createObjectURL(d),C.download=`${e}.csv`,document.body.append(C),C.click(),C.remove()}scrollTo(e){t(this,H).started&&t(this,H).scrollTo(e);let r=t(this,L).querySelector(`tr[data-dt-index="${e}"]`);if(r){r.scrollIntoView(!0);let s=parseFloat(getComputedStyle(t(this,A)).height);t(this,S).scrollTop-=s}}setColumnOrder(e){if(!Array.isArray(e))throw new TypeError("fields must be an array of field names");let r=e.map(s=>t(this,f)[s]).filter(s=>s!==null);a(this,f,Object.fromEntries(r.map(s=>[s.field,s]))),this.refresh()}refresh(){c(this,l,rt).call(this),c(this,l,ut).call(this)}};p=new WeakMap,A=new WeakMap,L=new WeakMap,Nt=new WeakMap,S=new WeakMap,f=new WeakMap,X=new WeakMap,E=new WeakMap,x=new WeakMap,z=new WeakMap,gt=new WeakMap,st=new WeakMap,H=new WeakMap,j=new WeakMap,Ct=new WeakMap,K=new WeakMap,pt=new WeakMap,bt=new WeakMap,vt=new WeakMap,T=new WeakMap,O=new WeakMap,l=new WeakSet,Dt=function(e,r){return Array.isArray(e)?e.some(s=>c(this,l,Dt).call(this,s,r)):r instanceof RegExp?r.test(String(e)):String(e).toLocaleLowerCase().includes(r)},Vt=function(e,r,s){if(Array.isArray(r)){for(let i of r)if(c(this,l,Vt).call(this,e,i))return!0;return!1}return typeof s=="function"?s(e,r):r instanceof RegExp?r.test(String(e)):r===e},ie=function(e,r){if(typeof t(this,z)=="function")return t(this,z).call(this,e,r);for(let s of Object.keys(t(this,z)||{})){let i=t(this,z)[s],n=t(this,f)[s],m=n?n.filterCallback:void 0,d=c(this,l,ft).call(this,e,s);if(!c(this,l,Vt).call(this,d,i,m))return!1}return!0},ut=function(){let e=typeof t(this,z)=="function"?t(this,z):(i,n)=>c(this,l,ie).call(this,i,n),r=null,s=[];t(this,x)instanceof RegExp?(r=t(this,x),s=[r]):typeof t(this,x)=="string"&&(r=t(this,x).toLocaleLowerCase(),s=t(this,K).call(this,r)),a(this,E,t(this,X).filter((i,n)=>{if(i._metadata.searchScore=0,!e(i,n))return!1;if(!r)return!0;let d=[...Object.values(t(this,f)).filter(C=>C.searchable).map(C=>C.field),...t(this,gt)];for(let C of d){let b=t(this,f)[C],g=`_${C}_tokens`;if(b&&g in i._metadata){let y=i._metadata[g];for(let w of s)c(this,l,Dt).call(this,y,w)&&(typeof w=="string"?i._metadata.searchScore+=w.length:i._metadata.searchScore++)}else{let y=c(this,l,ft).call(this,i,C);c(this,l,Dt).call(this,y,r)&&(typeof r=="string"?i._metadata.searchScore+=r.length:i._metadata.searchScore++)}}return i._metadata.searchScore>0})),c(this,l,St).call(this),c(this,l,mt).call(this),t(this,p).dispatchEvent(new CustomEvent(_.Events.ROWS_CHANGED,{bubbles:!0,cancelable:!0}))},ne=function(e,r,s){let i,n;if(s.sortOrder==="asc"?(i=e._metadata[`_${s.field}_sort`],n=r._metadata[`_${s.field}_sort`]):s.sortOrder==="desc"&&(i=r._metadata[`_${s.field}_sort`],n=e._metadata[`_${s.field}_sort`]),typeof s.sorter=="function"){let m=s.sorter(i,n);if(m!==0)return m}return i<n?-1:i>n?1:0},St=function(){let e=Object.values(t(this,f)).filter(r=>!r.element.hidden&&r.sortOrder).sort((r,s)=>r.sortPriority-s.sortPriority);t(this,E).sort((r,s)=>{let i=r._metadata.searchScore||0,n=s._metadata.searchScore||0;if(i>n)return-1;if(i<n)return 1;for(let m of e){let d=c(this,l,ne).call(this,r,s,m);if(d!==0)return d}return r._metadata.index-s._metadata.index}),c(this,l,mt).call(this)},rt=function(){var r,s,i,n,m,d,C;for(let b of Object.keys(t(this,f))){let g=t(this,f)[b];(r=g.element.parentElement)==null||r.append(g.element),g.element.hidden=!g.visible,g.element.style.width==""&&(g.element.style.width=g.element.offsetWidth+"px"),g.sortOrder==="asc"?((s=g.element)==null||s.classList.add("dt-ascending"),(i=g.element)==null||i.classList.remove("dt-descending")):g.sortOrder==="desc"?((n=g.element)==null||n.classList.add("dt-descending"),(m=g.element)==null||m.classList.remove("dt-ascending")):((d=g.element)==null||d.classList.remove("dt-ascending"),(C=g.element)==null||C.classList.remove("dt-descending"))}let e=Object.values(t(this,f)).filter(b=>b.visible).slice(-1)[0];e&&(e.element.style.width="")},mt=function(){if(t(this,L).innerHTML="",t(this,E).length){let e=!1;if(t(this,E).length>=t(this,j))try{t(this,H).rowCount=t(this,E).length,t(this,H).start(),e=!0}catch(r){r instanceof ot&&(console.warn("Failed to start virtual scroll... falling back to standard rendering"),console.warn(r.stack))}if(!e){if(t(this,E).length>se){let s=se.toLocaleString();console.warn(`Virtual scroll disabled with more than ${s} rows... Good luck with that!`)}t(this,H)&&t(this,H).stop();let r=t(this,E).map((s,i)=>c(this,l,$t).call(this,i));t(this,L).append(...r)}}else t(this,X).length===0?this.showMessage(t(this,bt),"dt-empty"):this.showMessage(t(this,vt),"dt-empty")},oe=function(e,r,s,i){typeof s.valueFormatter=="function"&&(r=s.valueFormatter(r,i)),e.innerText=r==null?"-":r,typeof s.elementFormatter=="function"&&s.elementFormatter(r,i,e),t(this,Ct)&&t(this,x)&&t(this,x)!=""&&s.searchable&&(e.innerHTML=e.innerText.replace(new RegExp(t(this,x),"i"),n=>`<mark>${n}</mark>`)),e.hidden=!s.visible},$t=function(e){let r=t(this,E)[e],s=document.createElement("tr");s.classList.add(...P(t(this,T).tr)),s.dataset.dtIndex=String(e);for(let i of Object.keys(t(this,f))){let n=c(this,l,ft).call(this,r,i),m=t(this,f)[i],d=document.createElement("td");d.classList.add(...P(t(this,T).td)),d.dataset.dtField=i,c(this,l,oe).call(this,d,n,m,r),s.append(d)}return typeof t(this,st)=="function"&&t(this,st).call(this,r,s),s},ft=function(e,r){let s=r.split("."),i=e;for(let n of s)if(i&&typeof i=="object")i=i[n];else return;return i},Tt=new WeakMap,Et=new WeakMap,wt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,xt=new WeakMap,Ht=new WeakMap,Mt=new WeakMap,Rt=new WeakMap,_t=new WeakMap,_.Events={ROW_CLICK:"dt.row.click",ROWS_CHANGED:"dt.rows.changed",COL_HIDE:"dt.col.hide",COL_SHOW:"dt.col.show",COL_SORT:"dt.col.sort",COL_RESIZE:"dt.col.resize",COL_REARRANGE:"dt.col.rearrange"};var Z=_,se=1e4;var B,J,D,ae=class{constructor(e,r,s){o(this,B);o(this,J);o(this,D,{saveColumnSorting:!0,saveColumnVisibility:!0,saveColumnWidth:!0,saveColumnOrder:!0});a(this,B,e),a(this,J,r),a(this,D,Q(Q({},t(this,D)),s)),this.restoreState();let i=e.table;t(this,D).saveColumnSorting&&i.addEventListener(Z.Events.COL_SORT,()=>this.saveState()),t(this,D).saveColumnVisibility&&(i.addEventListener(Z.Events.COL_HIDE,()=>this.saveState()),i.addEventListener(Z.Events.COL_SHOW,()=>this.saveState())),t(this,D).saveColumnWidth&&i.addEventListener(Z.Events.COL_RESIZE,()=>this.saveState()),t(this,D).saveColumnOrder&&i.addEventListener(Z.Events.COL_REARRANGE,()=>this.saveState())}saveState(){let e=t(this,B).columnStates;for(let r of e)t(this,D).saveColumnSorting||(r.sortOrder=void 0,r.sortPriority=void 0),t(this,D).saveColumnVisibility||(r.visible=void 0),t(this,D).saveColumnWidth||(r.width=void 0);localStorage.setItem(t(this,J),JSON.stringify(t(this,B).columnStates))}restoreState(){let e=localStorage.getItem(t(this,J));if(e)try{let r=JSON.parse(e);t(this,B).columnStates=r,t(this,D).saveColumnOrder&&t(this,B).setColumnOrder(r.map(s=>s.field))}catch(r){console.error("Failed to restore DataTable state:",r)}}clearState(){localStorage.removeItem(t(this,J))}};B=new WeakMap,J=new WeakMap,D=new WeakMap;export{Z as DataTable,ae as LocalStorageAdapter};
//# sourceMappingURL=datatable.mjs.map