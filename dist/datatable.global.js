"use strict";var yatl=(()=>{var yt=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var fe=Object.getOwnPropertyNames,re=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ne=a=>{throw TypeError(a)};var se=(a,e,r)=>e in a?yt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,Y=(a,e)=>{for(var r in e||(e={}))ie.call(e,r)&&se(a,r,e[r]);if(re)for(var r of re(e))ge.call(e,r)&&se(a,r,e[r]);return a};var Ce=(a,e)=>{for(var r in e)yt(a,r,{get:e[r],enumerable:!0})},pe=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fe(e))!ie.call(a,i)&&i!==r&&yt(a,i,{get:()=>e[i],enumerable:!(s=me(e,i))||s.enumerable});return a};var be=a=>pe(yt({},"__esModule",{value:!0}),a);var At=(a,e,r)=>e.has(a)||ne("Cannot "+r);var t=(a,e,r)=>(At(a,e,"read from private field"),r?r.call(a):e.get(a)),o=(a,e,r)=>e.has(a)?ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,r),l=(a,e,r,s)=>(At(a,e,"write to private field"),s?s.call(a,r):e.set(a,r),r),c=(a,e,r)=>(At(a,e,"access private method"),r);var Vt=(a,e,r,s)=>({set _(i){l(a,e,i,r)},get _(){return t(a,e,s)}});var we={};Ce(we,{DataTable:()=>N,LocalStorageAdapter:()=>Wt});var nt,O,y,tt,j,I,ot,$,B,at,lt,dt,R,Q,oe,st=class st{constructor({container:e,element:r,generator:s,nodePadding:i=2}){o(this,R);o(this,O);o(this,y);o(this,tt);o(this,j,0);o(this,I,0);o(this,ot,2);o(this,$,0);o(this,B,!1);o(this,at,0);o(this,lt,()=>{t(this,O).scrollTop!==t(this,at)&&(l(this,at,t(this,O).scrollTop),t(this,$)&&cancelAnimationFrame(t(this,$)),l(this,$,requestAnimationFrame(()=>c(this,R,Q).call(this))))});o(this,dt,()=>{c(this,R,Q).call(this)});l(this,O,e),l(this,y,r),l(this,tt,s),l(this,ot,i)}get rowCount(){return t(this,j)}set rowCount(e){l(this,j,e),c(this,R,Q).call(this)}get rowHeight(){return t(this,I)||c(this,R,oe).call(this),t(this,I)}get started(){return t(this,B)}scrollTo(e){if(e<0||e>=t(this,j))throw new RangeError("Index out of bounds.");t(this,O).scrollTop=this.rowHeight*e,c(this,R,Q).call(this)}start(){t(this,B)||(l(this,B,!0),t(this,O).addEventListener("scroll",t(this,lt)),window.addEventListener("resize",t(this,dt)),c(this,R,Q).call(this))}stop(){t(this,$)&&cancelAnimationFrame(t(this,$)),t(this,O).removeEventListener("scroll",t(this,lt)),window.removeEventListener("resize",t(this,dt)),l(this,B,!1)}};nt=new WeakMap,O=new WeakMap,y=new WeakMap,tt=new WeakMap,j=new WeakMap,I=new WeakMap,ot=new WeakMap,$=new WeakMap,B=new WeakMap,at=new WeakMap,lt=new WeakMap,dt=new WeakMap,R=new WeakSet,Q=function(){let e=t(this,O).scrollTop,r=this.rowCount,s=this.rowHeight,i=t(this,ot),n=s*r;t(this,y).innerHTML=`<tr style="height: ${n}px;"></tr>`;let m=t(this,y).offsetHeight,h=t(this,O).offsetHeight;if(!t(st,nt)&&m<Math.round(n-1)&&(l(st,nt,!0),console.error("Max element height exceeded. Virtual scroll may not work.")),!r||!s)return;let C=Math.floor(e/s)-i;C=Math.max(0,C);let b=Math.ceil(h/s)+2*i;b=Math.min(r-C,b);let g=C*s,E=n-(g+b*s);try{t(this,y).innerHTML="";let D=new Array(b).fill(null).map((Pt,zt)=>t(this,tt).call(this,zt+C)),W=document.createElement("tr"),vt=document.createElement("tr");W.style.height=g+"px",vt.style.height=E+"px",t(this,y).append(W),t(this,y).append(...D),t(this,y).append(vt)}catch(D){D instanceof RangeError&&console.log(D)}},oe=function(){if(t(this,j)===0){l(this,I,0);return}let e=Math.min(1e3,t(this,j)),r=[];for(let s=0;s<e;++s)r.push(t(this,tt).call(this,s));if(t(this,y).innerHTML="",t(this,y).append(...r),l(this,I,t(this,y).offsetHeight/e),t(this,I)<=0)throw new it("First 1000 rows had no rendered height. Virtual scroll can't be used.");t(this,I)*t(this,j)>33554400&&console.warn("Virtual scroll height exceeded maximum known element height.")},o(st,nt,!1);var kt=st,it=class extends Error{constructor(e){super(e)}};var Z=a=>{if(typeof a=="string")return a.split(" ");if(Array.isArray(a))return a;if(a==null)return[];throw new TypeError("classes must be string or array of strings")},_t=a=>a.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,e=>e.toUpperCase()),ae=a=>String(a).toLowerCase().replace(/[^\w\s]/g," ").trim().split(/\s+/);var p,A,k,Nt,T,u,V,v,H,_,mt,rt,S,ft,G,gt,Ct,pt,x,F,d,Lt,jt,de,ht,he,Dt,et,ct,ce,It,ut,Tt,bt,wt,St,xt,Ft,Ot,Ht,Mt,Rt,z=class z{constructor(e,r={}){o(this,d);o(this,p);o(this,A);o(this,k);o(this,Nt);o(this,T);o(this,u,{});o(this,V,[]);o(this,v,[]);o(this,H);o(this,_);o(this,mt,[]);o(this,rt);o(this,S);o(this,ft,!0);o(this,G,ae);o(this,gt,0);o(this,Ct,"No records found");o(this,pt,"No matching records found");o(this,x,{scroller:"dt-scroller",thead:"dt-headers"});o(this,F,null);o(this,Tt,e=>{e.preventDefault(),e.stopPropagation();let s=e.target.closest("th");if(!s)return;let i=s.dataset.dtField;if(!i)return;let n=t(this,u)[i];n&&(l(this,F,n),n.resizeStartX=e.clientX,n.resizeStartWidth=s.offsetWidth,document.addEventListener("mousemove",t(this,bt)),document.addEventListener("mouseup",t(this,wt)))});o(this,bt,e=>{if(!t(this,F))return;e.preventDefault();let r=t(this,F).resizeStartWidth+(e.clientX-t(this,F).resizeStartX);t(this,F).element.style.width=`${r}px`});o(this,wt,e=>{t(this,F)&&(document.removeEventListener("mousemove",t(this,bt)),document.removeEventListener("mouseup",t(this,wt)),t(this,p).dispatchEvent(new CustomEvent(z.Events.COL_RESIZE,{detail:{column:t(this,F),width:t(this,F).element.offsetWidth},bubbles:!0,cancelable:!0})),l(this,F,null))});o(this,St,e=>{let s=e.target.closest("th");s&&(s.style.width="0px")});o(this,xt,e=>{let s=e.target.dataset.dtField;e.dataTransfer&&s&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",s))});o(this,Ft,e=>(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1));o(this,Ot,e=>{e.target.classList.add("dt-drag-over")});o(this,Ht,e=>{e.target.classList.remove("dt-drag-over")});o(this,Mt,e=>{var C;let r=(C=e.dataTransfer)==null?void 0:C.getData("text/plain"),i=e.currentTarget.dataset.dtField;if(!r||!i)return;e.preventDefault(),e.stopPropagation();let n=Object.values(t(this,u)),m=n.findIndex(b=>b.field===r),h=n.findIndex(b=>b.field===i);if(m>-1&&h>-1){let[b]=n.splice(m,1),g=t(this,u)[i];h===n.length&&(g.element.style.width=g.element.offsetWidth+"px",b.element.style.width=""),n.splice(h,0,b),l(this,u,Object.fromEntries(n.map(E=>[E.field,E]))),c(this,d,et).call(this),c(this,d,ct).call(this),t(this,p).dispatchEvent(new CustomEvent(z.Events.COL_REARRANGE,{detail:{draggedColumn:b,dropColumn:t(this,u)[i],columns:n},bubbles:!0,cancelable:!0}))}});o(this,Rt,e=>{let r=document.querySelectorAll(".dt-drag-over");for(let s of r)s.classList.remove("dt-drag-over")});var qt,Bt,Gt,Ut,Kt,Jt,Yt;let{rowFormatter:s,columns:i=[],data:n=[],virtualScroll:m=!0,highlightSearch:h=!0,sortable:C=!0,searchable:b=!0,tokenize:g=!1,resizable:E=!0,rearrangeable:D=!1,extraSearchFields:W,noDataText:vt,noMatchText:Pt,classes:zt,tokenizer:ue}=r;if(typeof e=="string"){let f=document.querySelector(e);if(!f)throw new SyntaxError(`Failed to find table using selector ${e}`);l(this,p,f)}else l(this,p,e);if(!(t(this,p)instanceof HTMLTableElement))throw new TypeError("Invalid table element type. Must be HTMLTableElement");if(!Array.isArray(i))throw new TypeError("columns must be a list of columns");l(this,G,ue||t(this,G)),l(this,ft,h),l(this,mt,W||[]),l(this,Ct,vt||"No records found"),l(this,pt,Pt||"No matching records found"),l(this,x,Y(Y({},t(this,x)),zt)),l(this,rt,s),t(this,p).classList.add("data-table"),l(this,T,document.createElement("div")),t(this,T).classList.add(...Z(t(this,x).scroller)),t(this,T).style.overflow="auto",t(this,T).style.height="100%",t(this,p).style.height!==""&&(t(this,T).style.height=t(this,p).style.height,t(this,p).style.height=""),(qt=t(this,p).parentElement)==null||qt.insertBefore(t(this,T),t(this,p)),t(this,T).append(t(this,p)),t(this,p).querySelectorAll("thead").length>1&&console.warn("Multiple theads found in table. Using last one."),t(this,p).querySelectorAll("tbody").length>1&&console.warn("Multiple tbodys found in table. Using first one.");let $t=t(this,p).querySelector("thead:last-of-type");$t?l(this,A,$t):(l(this,A,document.createElement("thead")),t(this,p).insertBefore(t(this,A),t(this,p).firstChild)),t(this,A).classList.add(...Z(t(this,x).thead));let K=t(this,A).querySelector("tr:last-of-type");K||(K=document.createElement("tr"),t(this,A).append(K)),K.classList.add(...Z(t(this,x).tr)),K.innerHTML="";let Zt=t(this,p).querySelector("tbody:first-of-type");Zt?l(this,k,Zt):(l(this,k,document.createElement("tbody")),t(this,p).append(t(this,k))),t(this,k).classList.add(...Z(t(this,x).tbody)),t(this,k).addEventListener("click",f=>{let M,w,q;if(f.target instanceof HTMLTableCellElement?(w=f.target,M=w.parentElement,q=w.dataset.dtField):f.target instanceof HTMLTableRowElement&&(M=f.target),M){let Et=parseInt(M.dataset.dtIndex||"");if(!isNaN(Et)){let P=t(this,v)[Et],Qt=new CustomEvent(z.Events.ROW_CLICK,{detail:{row:P,index:Et,field:q},bubbles:!0,cancelable:!0});M.dispatchEvent(Qt)}}});let Xt=!1;for(let f of i){let M={field:f.field,title:f.title||_t(f.field),element:document.createElement("th"),visible:(Bt=f.visible)!=null?Bt:!0,sortable:(Gt=f.sortable)!=null?Gt:C,searchable:(Ut=f.searchable)!=null?Ut:b,tokenize:(Kt=f.tokenize)!=null?Kt:g,sortOrder:(Jt=f.sortOrder)!=null?Jt:null,sortPriority:(Yt=f.sortPriority)!=null?Yt:0,resizeStartWidth:null,resizeStartX:null,valueFormatter:f.valueFormatter,elementFormatter:f.elementFormatter,comparatorCallback:f.sorter,filterCallback:f.filter,sortValueCallback:f.sortValue};t(this,u)[f.field]=M;let w=M.element;w.classList.add(...Z(t(this,x).th)),w.dataset.dtField=f.field;let q=document.createElement("div");if(q.classList.add("dt-header-name"),q.innerText=f.title||_t(f.field),w.innerHTML="",w.append(q),w.hidden=!M.visible,K.append(w),M.visible&&(Xt=!0),f.sortable&&(w.classList.add("dt-sortable"),q.addEventListener("click",P=>{var ee;let te=(ee=P.target.closest("th"))==null?void 0:ee.dataset.dtField;if(!te)return;let J=t(this,u)[te];J.sortOrder?J.sortOrder==="asc"?this.sort(J.field,"desc"):J.sortOrder&&this.sort(J.field,null):this.sort(J.field,"asc")})),f.resizable===void 0?E:f.resizable){let P=document.createElement("div");P.classList.add("dt-resizer"),P.addEventListener("mousedown",t(this,Tt)),P.addEventListener("dblclick",t(this,St)),w.append(P)}typeof f.width=="number"?w.style.width=f.width+"px":typeof f.width=="string"&&(w.style.width=f.width),D&&(w.draggable=!0,w.addEventListener("dragstart",t(this,xt)),w.addEventListener("dragenter",t(this,Ot)),w.addEventListener("dragover",t(this,Ft)),w.addEventListener("dragleave",t(this,Ht)),w.addEventListener("drop",t(this,Mt)),w.addEventListener("dragend",t(this,Rt)))}Object.keys(t(this,u)).length===0?console.warn("No columns found. At least one column is required."):Xt||(console.warn("At least a single column must be visible. Showing the first column."),this.showColumn(Object.keys(t(this,u))[0])),this.virtualScroll=m,this.loadData(n)}get columnStates(){return Object.values(t(this,u)).map(e=>({field:e.field,title:e.title,visible:e.visible,sortOrder:e.sortOrder,sortPriority:e.sortPriority,width:e.element.style.width}))}set columnStates(e){var r,s,i,n;for(let m of e){let h=t(this,u)[m.field];if(!h){console.warn(`Attempting to restore state for non-existent column ${m.field}`);continue}h.visible=(r=m.visible)!=null?r:h.visible,h.sortOrder=(s=m.sortOrder)!=null?s:h.sortOrder,h.sortPriority=(i=m.sortPriority)!=null?i:h.sortPriority,h.element.style.width=(n=m.width)!=null?n:h.element.style.width}this.refresh()}get rows(){return t(this,v)}get length(){return t(this,v)?t(this,v).length:0}get table(){return t(this,p)}get virtualScroll(){return!!t(this,S)}set virtualScroll(e){var r;e!=this.virtualScroll&&(e?(l(this,S,new kt({container:t(this,T),element:t(this,k),generator:s=>c(this,d,It).call(this,s)})),t(this,S).start()):((r=t(this,S))==null||r.stop(),l(this,S,void 0)),c(this,d,ct).call(this))}loadData(e){if(Array.isArray(e)&&e.length>0){let r=0;l(this,V,e),l(this,v,t(this,V));for(let s of t(this,V)){let i={index:r++,tokens:{},sortValues:{}};s._metadata=i;for(let n of Object.keys(t(this,u))){let m=t(this,u)[n],h=c(this,d,ut).call(this,s,n);typeof m.sortValueCallback=="function"?i.sortValues[n]=m.sortValueCallback(h):typeof h=="string"?i.sortValues[n]=h.toLocaleLowerCase():i.sortValues[n]=h,m.searchable&&m.tokenize&&h&&(i.tokens[n]=[h,...t(this,G).call(this,h)])}}}else l(this,V,[]),l(this,v,[]);c(this,d,et).call(this),c(this,d,ht).call(this)}showMessage(e,r){Array.isArray(r)?r=r.join(" "):typeof r!="string"&&(r="");let s=Object.keys(t(this,u)).length;t(this,k).innerHTML=`<tr class="${r}"><td colSpan=${s}>${e}</td></tr>`}search(e){l(this,H,e!==""?e:null),c(this,d,ht).call(this)}filter(e){if(typeof e!="object"&&typeof e!="function")throw new TypeError("filters must be object or function");l(this,_,e),c(this,d,ht).call(this)}sort(e,r){let s=t(this,u)[e];if(!s){console.warn(`Attempting to sort non-existent column ${e}`);return}r!=s.sortOrder&&(r==="asc"||r==="desc"?s.sortPriority===Number.MAX_VALUE&&(s.sortPriority=Vt(this,gt)._++):(s.sortPriority=Number.MAX_VALUE,Vt(this,gt)._--),s.sortOrder=r),c(this,d,et).call(this),c(this,d,Dt).call(this);let i=new CustomEvent(z.Events.COL_SORT,{detail:{column:s,order:s.sortOrder},bubbles:!0,cancelable:!0});t(this,p).dispatchEvent(i)}setColumnVisibility(e,r){let s=t(this,u)[e];if(!s){console.warn(`Attempting to ${r?"show":"hide"} non-existent column ${e}`);return}s.visible=r,c(this,d,et).call(this),c(this,d,Dt).call(this);let i=r?z.Events.COL_SHOW:z.Events.COL_HIDE,n=new CustomEvent(i,{detail:{column:s,visible:r},bubbles:!0,cancelable:!0});t(this,p).dispatchEvent(n)}showColumn(e){this.setColumnVisibility(e,!0)}hideColumn(e){this.setColumnVisibility(e,!1)}export(e,r=!1){let s=r?t(this,V):t(this,v);if(s.length===0)return;let i=Object.keys(s[0]).filter(b=>b in t(this,u)?r?!0:t(this,u)[b].element.hidden===!1:!1),n=s.map(b=>{let g=[];for(let[E,D]of Object.entries(b))if(E in t(this,u)){let W=t(this,u)[E];(r||!W.element.hidden)&&(typeof W.valueFormatter=="function"&&(D=W.valueFormatter(D,b)),D=String(D).replace('"','""'),g.push(`"${D}"`))}return g.join(",")}).join(`
`),m=i+`
`+n,h=new Blob([m],{type:"text/csv;charset=utf-8,"}),C=document.createElement("a");C.style.display="none",C.href=URL.createObjectURL(h),C.download=`${e}.csv`,document.body.append(C),C.click(),C.remove()}scrollTo(e){t(this,S)&&t(this,S).scrollTo(e);let r=t(this,k).querySelector(`tr[data-dt-index="${e}"]`);if(r){r.scrollIntoView(!0);let s=parseFloat(getComputedStyle(t(this,A)).height);t(this,T).scrollTop-=s}}setColumnOrder(e){if(!Array.isArray(e))throw new TypeError("fields must be an array of field names");let r=e.map(s=>t(this,u)[s]).filter(s=>s!==null);l(this,u,Object.fromEntries(r.map(s=>[s.field,s]))),this.refresh()}refresh(){c(this,d,et).call(this),c(this,d,ht).call(this)}};p=new WeakMap,A=new WeakMap,k=new WeakMap,Nt=new WeakMap,T=new WeakMap,u=new WeakMap,V=new WeakMap,v=new WeakMap,H=new WeakMap,_=new WeakMap,mt=new WeakMap,rt=new WeakMap,S=new WeakMap,ft=new WeakMap,G=new WeakMap,gt=new WeakMap,Ct=new WeakMap,pt=new WeakMap,x=new WeakMap,F=new WeakMap,d=new WeakSet,Lt=function(e,r){return Array.isArray(e)?e.some(s=>c(this,d,Lt).call(this,s,r)):r instanceof RegExp?r.test(String(e)):String(e).toLocaleLowerCase().includes(r)},jt=function(e,r,s){if(Array.isArray(r)){for(let i of r)if(c(this,d,jt).call(this,e,i))return!0;return!1}return typeof s=="function"?s(e,r):r instanceof RegExp?r.test(String(e)):r===e},de=function(e,r){if(typeof t(this,_)=="function")return t(this,_).call(this,e,r);for(let s of Object.keys(t(this,_)||{})){let i=t(this,_)[s],n=t(this,u)[s],m=n?n.filterCallback:void 0,h=c(this,d,ut).call(this,e,s);if(!c(this,d,jt).call(this,h,i,m))return!1}return!0},ht=function(){let e=typeof t(this,_)=="function"?t(this,_):(i,n)=>c(this,d,de).call(this,i,n),r=null,s=[];t(this,H)instanceof RegExp?(r=t(this,H),s=[r]):typeof t(this,H)=="string"&&(r=t(this,H).toLocaleLowerCase(),s=t(this,G).call(this,r)),l(this,v,t(this,V).filter((i,n)=>{if(i._metadata.searchScore=0,!e(i,n))return!1;if(!r)return!0;let h=[...Object.values(t(this,u)).filter(C=>C.searchable).map(C=>C.field),...t(this,mt)];for(let C of h)if(t(this,u)[C]&&C in i._metadata.tokens){let g=i._metadata.tokens[C];for(let E of s)c(this,d,Lt).call(this,g,E)&&(typeof E=="string"?i._metadata.searchScore+=E.length:i._metadata.searchScore++)}else{let g=c(this,d,ut).call(this,i,C);c(this,d,Lt).call(this,g,r)&&(typeof r=="string"?i._metadata.searchScore+=r.length:i._metadata.searchScore++)}return i._metadata.searchScore>0})),c(this,d,Dt).call(this),c(this,d,ct).call(this),t(this,p).dispatchEvent(new CustomEvent(z.Events.ROWS_CHANGED,{bubbles:!0,cancelable:!0}))},he=function(e,r,s){let i,n;if(s.sortOrder==="asc"?(i=e._metadata.sortValues[s.field],n=r._metadata.sortValues[s.field]):s.sortOrder==="desc"&&(i=r._metadata.sortValues[s.field],n=e._metadata.sortValues[s.field]),typeof s.sorter=="function"){let m=s.sorter(i,n);if(m!==0)return m}return i<n?-1:i>n?1:0},Dt=function(){let e=Object.values(t(this,u)).filter(r=>!r.element.hidden&&r.sortOrder).sort((r,s)=>r.sortPriority-s.sortPriority);t(this,v).sort((r,s)=>{let i=r._metadata.searchScore||0,n=s._metadata.searchScore||0;if(i>n)return-1;if(i<n)return 1;for(let m of e){let h=c(this,d,he).call(this,r,s,m);if(h!==0)return h}return r._metadata.index-s._metadata.index}),c(this,d,ct).call(this)},et=function(){var r,s,i,n,m,h,C;for(let b of Object.keys(t(this,u))){let g=t(this,u)[b];(r=g.element.parentElement)==null||r.append(g.element),g.element.hidden=!g.visible,g.element.style.width===""&&(g.element.style.width=g.element.offsetWidth+"px"),g.sortOrder==="asc"?((s=g.element)==null||s.classList.add("dt-ascending"),(i=g.element)==null||i.classList.remove("dt-descending")):g.sortOrder==="desc"?((n=g.element)==null||n.classList.add("dt-descending"),(m=g.element)==null||m.classList.remove("dt-ascending")):((h=g.element)==null||h.classList.remove("dt-ascending"),(C=g.element)==null||C.classList.remove("dt-descending"))}let e=Object.values(t(this,u)).filter(b=>b.visible).slice(-1)[0];e&&(e.element.style.width="")},ct=function(){if(t(this,k).innerHTML="",t(this,v).length)if(t(this,S))try{t(this,S).rowCount=t(this,v).length}catch(e){e instanceof it&&(console.warn("Failed to start virtual scroll... falling back to standard rendering"),console.warn(e.stack))}else{if(t(this,v).length>le){let r=le.toLocaleString();console.warn(`Virtual scroll disabled with more than ${r} rows... Good luck with that!`)}let e=t(this,v).map((r,s)=>c(this,d,It).call(this,s));t(this,k).append(...e)}else t(this,V).length===0?this.showMessage(t(this,Ct),"dt-empty"):this.showMessage(t(this,pt),"dt-empty")},ce=function(e,r,s,i){typeof s.valueFormatter=="function"&&(r=s.valueFormatter(r,i)),e.innerText=r==null?"-":r,typeof s.elementFormatter=="function"&&s.elementFormatter(r,i,e),t(this,ft)&&t(this,H)&&t(this,H)!=""&&s.searchable&&(e.innerHTML=e.innerText.replace(new RegExp(t(this,H),"i"),n=>`<mark>${n}</mark>`)),e.hidden=!s.visible},It=function(e){let r=t(this,v)[e],s=document.createElement("tr");s.classList.add(...Z(t(this,x).tr)),s.dataset.dtIndex=String(e);for(let i of Object.keys(t(this,u))){let n=c(this,d,ut).call(this,r,i),m=t(this,u)[i],h=document.createElement("td");h.classList.add(...Z(t(this,x).td)),h.dataset.dtField=i,c(this,d,ce).call(this,h,n,m,r),s.append(h)}return typeof t(this,rt)=="function"&&t(this,rt).call(this,r,s),s},ut=function(e,r){let s=r.split("."),i=e;for(let n of s)if(i&&typeof i=="object")i=i[n];else return;return i},Tt=new WeakMap,bt=new WeakMap,wt=new WeakMap,St=new WeakMap,xt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,Mt=new WeakMap,Rt=new WeakMap,z.Events={ROW_CLICK:"dt.row.click",ROWS_CHANGED:"dt.rows.changed",COL_HIDE:"dt.col.hide",COL_SHOW:"dt.col.show",COL_SORT:"dt.col.sort",COL_RESIZE:"dt.col.resize",COL_REARRANGE:"dt.col.rearrange"};var N=z,le=1e4;var X,U,L,Wt=class{constructor(e,r,s){o(this,X);o(this,U);o(this,L,{saveColumnSorting:!0,saveColumnVisibility:!0,saveColumnWidth:!0,saveColumnOrder:!0});l(this,X,e),l(this,U,r),l(this,L,Y(Y({},t(this,L)),s)),this.restoreState();let i=e.table;t(this,L).saveColumnSorting&&i.addEventListener(N.Events.COL_SORT,()=>this.saveState()),t(this,L).saveColumnVisibility&&(i.addEventListener(N.Events.COL_HIDE,()=>this.saveState()),i.addEventListener(N.Events.COL_SHOW,()=>this.saveState())),t(this,L).saveColumnWidth&&i.addEventListener(N.Events.COL_RESIZE,()=>this.saveState()),t(this,L).saveColumnOrder&&i.addEventListener(N.Events.COL_REARRANGE,()=>this.saveState())}saveState(){let e=t(this,X).columnStates;for(let r of e)t(this,L).saveColumnSorting||(r.sortOrder=void 0,r.sortPriority=void 0),t(this,L).saveColumnVisibility||(r.visible=void 0),t(this,L).saveColumnWidth||(r.width=void 0);localStorage.setItem(t(this,U),JSON.stringify(t(this,X).columnStates))}restoreState(){let e=localStorage.getItem(t(this,U));if(e)try{let r=JSON.parse(e);t(this,X).columnStates=r,t(this,L).saveColumnOrder&&t(this,X).setColumnOrder(r.map(s=>s.field))}catch(r){console.error("Failed to restore DataTable state:",r)}}clearState(){localStorage.removeItem(t(this,U))}};X=new WeakMap,U=new WeakMap,L=new WeakMap;return be(we);})();
//# sourceMappingURL=datatable.global.js.map