"use strict";var yatl=(()=>{var kt=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var de=Object.getOwnPropertyNames,Yt=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ee=a=>{throw TypeError(a)};var Qt=(a,e,r)=>e in a?kt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,tt=(a,e)=>{for(var r in e||(e={}))te.call(e,r)&&Qt(a,r,e[r]);if(Yt)for(var r of Yt(e))he.call(e,r)&&Qt(a,r,e[r]);return a};var ce=(a,e)=>{for(var r in e)kt(a,r,{get:e[r],enumerable:!0})},ue=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of de(e))!te.call(a,i)&&i!==r&&kt(a,i,{get:()=>e[i],enumerable:!(s=le(e,i))||s.enumerable});return a};var me=a=>ue(kt({},"__esModule",{value:!0}),a);var At=(a,e,r)=>e.has(a)||ee("Cannot "+r);var t=(a,e,r)=>(At(a,e,"read from private field"),r?r.call(a):e.get(a)),o=(a,e,r)=>e.has(a)?ee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,r),l=(a,e,r,s)=>(At(a,e,"write to private field"),s?s.call(a,r):e.set(a,r),r),h=(a,e,r)=>(At(a,e,"access private method"),r);var jt=(a,e,r,s)=>({set _(i){l(a,e,i,r)},get _(){return t(a,e,s)}});var fe={};ce(fe,{DataTable:()=>I,LocalStorageAdapter:()=>Nt});var at,F,y,rt,V,$,lt,Z,U,dt,ht,ct,R,et,re,nt=class nt{constructor({container:e,element:r,generator:s,nodePadding:i=2}){o(this,R);o(this,F);o(this,y);o(this,rt);o(this,V,0);o(this,$,0);o(this,lt,2);o(this,Z,0);o(this,U,!1);o(this,dt,0);o(this,ht,()=>{t(this,F).scrollTop!==t(this,dt)&&(l(this,dt,t(this,F).scrollTop),t(this,Z)&&cancelAnimationFrame(t(this,Z)),l(this,Z,requestAnimationFrame(()=>h(this,R,et).call(this))))});o(this,ct,()=>{h(this,R,et).call(this)});l(this,F,e),l(this,y,r),l(this,rt,s),l(this,lt,i)}get rowCount(){return t(this,V)}set rowCount(e){l(this,V,e),h(this,R,et).call(this)}get rowHeight(){return t(this,$)||h(this,R,re).call(this),t(this,$)}get started(){return t(this,U)}scrollTo(e){if(e<0||e>=t(this,V))throw new RangeError("Index out of bounds.");t(this,F).scrollTop=this.rowHeight*e,h(this,R,et).call(this)}start(){t(this,U)||(l(this,U,!0),t(this,F).addEventListener("scroll",t(this,ht)),window.addEventListener("resize",t(this,ct)),h(this,R,et).call(this))}stop(){t(this,Z)&&cancelAnimationFrame(t(this,Z)),t(this,F).removeEventListener("scroll",t(this,ht)),window.removeEventListener("resize",t(this,ct)),l(this,U,!1)}};at=new WeakMap,F=new WeakMap,y=new WeakMap,rt=new WeakMap,V=new WeakMap,$=new WeakMap,lt=new WeakMap,Z=new WeakMap,U=new WeakMap,dt=new WeakMap,ht=new WeakMap,ct=new WeakMap,R=new WeakSet,et=function(){let e=t(this,F).scrollTop,r=this.rowCount,s=this.rowHeight,i=t(this,lt),n=s*r;t(this,y).innerHTML=`<tr style="height: ${n}px;"></tr>`;let f=t(this,y).offsetHeight,u=t(this,F).offsetHeight;if(!t(nt,at)&&f<Math.round(n-1)&&(l(nt,at,!0),console.error("Max element height exceeded. Virtual scroll may not work.")),!r||!s)return;let g=Math.floor(e/s)-i;g=Math.max(0,g);let b=Math.ceil(u/s)+2*i;b=Math.min(r-g,b);let m=g*s,v=n-(m+b*s);try{t(this,y).innerHTML="";let D=new Array(b).fill(null).map((q,yt)=>t(this,rt).call(this,yt+g)),N=document.createElement("tr"),it=document.createElement("tr");N.style.height=m+"px",it.style.height=v+"px",t(this,y).append(N),t(this,y).append(...D),t(this,y).append(it)}catch(D){D instanceof RangeError&&console.log(D)}},re=function(){if(t(this,V)===0){l(this,$,0);return}let e=Math.min(1e3,t(this,V)),r=[];for(let s=0;s<e;++s)r.push(t(this,rt).call(this,s));if(t(this,y).innerHTML="",t(this,y).append(...r),l(this,$,t(this,y).offsetHeight/e),t(this,$)<=0)throw new ot("First 1000 rows had no rendered height. Virtual scroll can't be used.");t(this,$)*t(this,V)>33554400&&console.warn("Virtual scroll height exceeded maximum known element height.")},o(nt,at,!1);var Dt=nt,ot=class extends Error{constructor(e){super(e)}};var B=a=>{if(typeof a=="string")return a.split(" ");if(Array.isArray(a))return a;if(a==null)return[];throw new TypeError("classes must be string or array of strings")},Vt=a=>a.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,e=>e.toUpperCase()),se=a=>String(a).toLowerCase().replace(/[^\w\s]/g," ").trim().split(/\s+/);var C,_,L,Pt,T,p,X,E,O,A,gt,st,H,j,pt,J,bt,Ct,wt,S,x,d,Tt,$t,ne,ut,oe,St,K,mt,ae,It,ft,xt,Et,vt,Ft,Ot,Ht,Mt,Rt,zt,_t,z=class z{constructor(e,{formatter:r,columns:s=[],data:i,virtualScroll:n=1e3,highlightSearch:f=!0,resizable:u=!0,rearrangeable:g=!1,extraSearchFields:b,noDataText:m,noMatchText:v,classes:D,tokenizer:N}={}){o(this,d);o(this,C);o(this,_);o(this,L);o(this,Pt);o(this,T);o(this,p,{});o(this,X,[]);o(this,E,[]);o(this,O);o(this,A);o(this,gt,[]);o(this,st);o(this,H);o(this,j,1e3);o(this,pt,!0);o(this,J,se);o(this,bt,0);o(this,Ct,"No records found");o(this,wt,"No matching records found");o(this,S,{scroller:"dt-scroller",thead:"dt-headers"});o(this,x,null);o(this,xt,e=>{e.preventDefault(),e.stopPropagation();let s=e.target.closest("th");if(!s)return;let i=s.dataset.dtField;if(!i)return;let n=t(this,p)[i];n&&(l(this,x,n),n.resizeStartX=e.clientX,n.resizeStartWidth=s.offsetWidth,document.addEventListener("mousemove",t(this,Et)),document.addEventListener("mouseup",t(this,vt)))});o(this,Et,e=>{if(!t(this,x))return;e.preventDefault();let r=t(this,x).resizeStartWidth+(e.clientX-t(this,x).resizeStartX);t(this,x).element.style.width=`${r}px`});o(this,vt,e=>{t(this,x)&&(document.removeEventListener("mousemove",t(this,Et)),document.removeEventListener("mouseup",t(this,vt)),t(this,C).dispatchEvent(new CustomEvent(z.Events.COL_RESIZE,{detail:{column:t(this,x),width:t(this,x).element.offsetWidth},bubbles:!0,cancelable:!0})),l(this,x,null))});o(this,Ft,e=>{let s=e.target.closest("th");s&&(s.style.width="0px")});o(this,Ot,e=>{let s=e.target.dataset.dtField;console.log("dragColumnStart",s),e.dataTransfer&&s&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",s))});o(this,Ht,e=>(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1));o(this,Mt,e=>{e.target.classList.add("dt-drag-over")});o(this,Rt,e=>{e.target.classList.remove("dt-drag-over")});o(this,zt,e=>{var g;let r=(g=e.dataTransfer)==null?void 0:g.getData("text/plain"),i=e.currentTarget.dataset.dtField;if(!r||!i)return;e.preventDefault(),e.stopPropagation();let n=this.columns,f=n.findIndex(b=>b.field===r),u=n.findIndex(b=>b.field===i);if(f>-1&&u>-1){let[b]=n.splice(f,1);n.splice(u,0,b),l(this,p,Object.fromEntries(n.map(v=>[v.field,v])));let m=n[n.length-1];m&&m.element&&(m.element.style.width=""),h(this,d,K).call(this),h(this,d,mt).call(this),t(this,C).dispatchEvent(new CustomEvent(z.Events.COL_REARRANGE,{detail:{draggedColumn:b,dropColumn:t(this,p)[i],columns:n},bubbles:!0,cancelable:!0}))}});o(this,_t,e=>{let r=document.querySelectorAll(".dt-drag-over");for(let s of r)s.classList.remove("dt-drag-over")});var Zt,Bt,Xt,qt,Gt;if(typeof e=="string"){let c=document.querySelector(e);if(!c)throw new SyntaxError(`Failed to find table using selector ${e}`);l(this,C,c)}else l(this,C,e);if(!(t(this,C)instanceof HTMLTableElement))throw new TypeError("Invalid table element type. Must be HTMLTableElement");if(!Array.isArray(s))throw new TypeError("columns must be a list of columns");l(this,J,N||t(this,J)),l(this,pt,f),l(this,gt,b||[]),l(this,Ct,m||"No records found"),l(this,wt,v||"No matching records found"),l(this,S,tt(tt({},t(this,S)),D)),l(this,st,r),t(this,C).classList.add("data-table"),l(this,T,document.createElement("div")),t(this,T).classList.add(...B(t(this,S).scroller)),t(this,T).style.overflow="auto",t(this,T).style.height="100%",t(this,C).style.height!==""&&(t(this,T).style.height=t(this,C).style.height,t(this,C).style.height=""),(Zt=t(this,C).parentElement)==null||Zt.insertBefore(t(this,T),t(this,C)),t(this,T).append(t(this,C)),t(this,C).querySelectorAll("thead").length>1&&console.warn("Multiple theads found in table. Using last one."),t(this,C).querySelectorAll("tbody").length>1&&console.warn("Multiple tbodys found in table. Using first one.");let it=t(this,C).querySelector("thead:last-of-type");it?l(this,_,it):(l(this,_,document.createElement("thead")),t(this,C).insertBefore(t(this,_),t(this,C).firstChild)),t(this,_).classList.add(...B(t(this,S).thead));let q=t(this,_).querySelector("tr:last-of-type");q||(q=document.createElement("tr"),t(this,_).append(q)),q.classList.add(...B(t(this,S).tr)),q.innerHTML="";let yt=t(this,C).querySelector("tbody:first-of-type");yt?l(this,L,yt):(l(this,L,document.createElement("tbody")),t(this,C).append(t(this,L))),t(this,L).classList.add(...B(t(this,S).tbody)),t(this,L).addEventListener("click",c=>{let M,w,G;if(c.target instanceof HTMLTableCellElement?(w=c.target,M=w.parentElement,G=w.dataset.dtField):c.target instanceof HTMLTableRowElement&&(M=c.target),M){let Lt=parseInt(M.dataset.dtIndex||"");if(!isNaN(Lt)){let W=t(this,E)[Lt],Ut=new CustomEvent(z.Events.ROW_CLICK,{detail:{row:W,index:Lt,field:G},bubbles:!0,cancelable:!0});M.dispatchEvent(Ut)}}});let Wt=!1;for(let c of s){let M={field:c.field,title:c.title||Vt(c.field),element:document.createElement("th"),visible:(Bt=c.visible)!=null?Bt:!0,sortable:(Xt=c.sortable)!=null?Xt:!1,searchable:(qt=c.searchable)!=null?qt:!1,tokenize:(Gt=c.tokenize)!=null?Gt:!1,sortOrder:c.sortOrder||null,sortPriority:c.sortPriority,resizeStartWidth:null,resizeStartX:null,valueFormatter:c.valueFormatter,elementFormatter:c.elementFormatter,filter:c.filter,comparator:c.comparator};t(this,p)[c.field]=M;let w=M.element;w.classList.add(...B(t(this,S).th)),w.dataset.dtField=c.field;let G=document.createElement("div");if(G.classList.add("dt-header-name"),G.innerText=c.title||Vt(c.field),w.innerHTML="",w.append(G),w.hidden=!M.visible,q.append(w),M.visible&&(Wt=!0),c.sortable&&(w.classList.add("dt-sortable"),G.addEventListener("click",W=>{var Jt;let Kt=(Jt=W.target.closest("th"))==null?void 0:Jt.dataset.dtField;if(!Kt)return;let Q=t(this,p)[Kt];Q.sortOrder?Q.sortOrder==="asc"?this.sort(Q.field,"desc"):Q.sortOrder&&this.sort(Q.field,null):this.sort(Q.field,"asc")})),c.resizable===void 0?u:c.resizable){let W=document.createElement("div");W.classList.add("dt-resizer"),W.addEventListener("mousedown",t(this,xt)),W.addEventListener("dblclick",t(this,Ft)),w.append(W)}typeof c.width=="number"?w.style.width=c.width+"px":typeof c.width=="string"&&(w.style.width=c.width),g&&(w.draggable=!0,w.addEventListener("dragstart",t(this,Ot)),w.addEventListener("dragenter",t(this,Mt)),w.addEventListener("dragover",t(this,Ht)),w.addEventListener("dragleave",t(this,Rt)),w.addEventListener("drop",t(this,zt)),w.addEventListener("dragend",t(this,_t)))}Object.keys(t(this,p)).length===0?console.warn("No columns found. At least one column is required."):Wt||(console.warn("At least a single column must be visible. Showing the first column."),this.showColumn(Object.keys(t(this,p))[0])),l(this,H,new Dt({container:t(this,T),element:t(this,L),generator:c=>h(this,d,It).call(this,c)})),this.virtualScroll=n,this.loadData(i||[])}get columns(){return Object.values(t(this,p))}get rows(){return t(this,E)}get length(){return t(this,E)?t(this,E).length:0}get table(){return t(this,C)}get virtualScroll(){return t(this,j)===Number.MAX_VALUE?!0:t(this,j)===0?!1:t(this,j)}set virtualScroll(e){typeof e=="number"?l(this,j,e):e?l(this,j,0):l(this,j,Number.MAX_VALUE),h(this,d,mt).call(this)}get virtualScrollStatus(){return t(this,H).started}loadData(e){if(Array.isArray(e)&&e.length>0){let r=0;for(let s of e){let i={index:r++};s._metadata=i;for(let n of Object.keys(t(this,p))){let f=t(this,p)[n],u=h(this,d,ft).call(this,s,n);typeof f.comparator=="function"?i[`_${n}_sort`]=f.comparator(u,s):typeof u=="string"?i[`_${n}_sort`]=u.toLocaleLowerCase():i[`_${n}_sort`]=u,f.searchable&&f.tokenize&&u&&(i[`_${n}_tokens`]=[u,...t(this,J).call(this,u)])}}l(this,X,e),l(this,E,e)}else l(this,X,[]),l(this,E,[]);h(this,d,K).call(this),h(this,d,ut).call(this)}showMessage(e,r){Array.isArray(r)?r=r.join(" "):typeof r!="string"&&(r="");let s=Object.keys(t(this,p)).length;t(this,L).innerHTML=`<tr class="${r}"><td colSpan=${s}>${e}</td></tr>`}search(e){l(this,O,e!==""?e:null),h(this,d,ut).call(this)}filter(e){if(typeof e!="object"&&typeof e!="function")throw new TypeError("filters must be object or function");l(this,A,e),h(this,d,ut).call(this)}sort(e,r){let s=t(this,p)[e];if(!s){console.warn(`Attempting to sort non-existent column ${e}`);return}r!=s.sortOrder&&(r==="asc"||r==="desc"?s.sortPriority=jt(this,bt)._++:(s.sortPriority=void 0,jt(this,bt)._--),s.sortOrder=r),h(this,d,K).call(this),h(this,d,St).call(this);let i=new CustomEvent(z.Events.COL_SORT,{detail:{column:s,order:s.sortOrder},bubbles:!0,cancelable:!0});t(this,C).dispatchEvent(i)}setColumnVisibility(e,r){let s=t(this,p)[e];if(!s){console.warn(`Attempting to ${r?"show":"hide"} non-existent column ${e}`);return}s.visible=r,h(this,d,K).call(this),h(this,d,St).call(this);let i=r?z.Events.COL_SHOW:z.Events.COL_HIDE,n=new CustomEvent(i,{detail:{column:s,visible:r},bubbles:!0,cancelable:!0});t(this,C).dispatchEvent(n)}showColumn(e){this.setColumnVisibility(e,!0)}hideColumn(e){this.setColumnVisibility(e,!1)}export(e,r=!1){let s=r?t(this,X):t(this,E);if(s.length===0)return;let i=Object.keys(s[0]).filter(b=>b in t(this,p)?r?!0:t(this,p)[b].element.hidden===!1:!1),n=s.map(b=>{let m=[];for(let[v,D]of Object.entries(b))if(v in t(this,p)){let N=t(this,p)[v];(r||!N.element.hidden)&&(typeof N.valueFormatter=="function"&&(D=N.valueFormatter(D,b)),D=String(D).replace('"','""'),m.push(`"${D}"`))}return m.join(",")}).join(`
`),f=i+`
`+n,u=new Blob([f],{type:"text/csv;charset=utf-8,"}),g=document.createElement("a");g.style.display="none",g.href=URL.createObjectURL(u),g.download=`${e}.csv`,document.body.append(g),g.click(),g.remove()}scrollTo(e){t(this,H).started&&t(this,H).scrollTo(e);let r=t(this,L).querySelector(`tr[data-dt-index="${e}"]`);if(r){r.scrollIntoView(!0);let s=parseFloat(getComputedStyle(t(this,_)).height);t(this,T).scrollTop-=s}}setColumnOrder(e){if(!Array.isArray(e))throw new TypeError("fields must be an array of field names");let r=e.map(s=>t(this,p)[s]).filter(s=>s!==null);l(this,p,Object.fromEntries(r.map(s=>[s.field,s]))),h(this,d,K).call(this)}refresh(){h(this,d,K).call(this),h(this,d,ut).call(this)}};C=new WeakMap,_=new WeakMap,L=new WeakMap,Pt=new WeakMap,T=new WeakMap,p=new WeakMap,X=new WeakMap,E=new WeakMap,O=new WeakMap,A=new WeakMap,gt=new WeakMap,st=new WeakMap,H=new WeakMap,j=new WeakMap,pt=new WeakMap,J=new WeakMap,bt=new WeakMap,Ct=new WeakMap,wt=new WeakMap,S=new WeakMap,x=new WeakMap,d=new WeakSet,Tt=function(e,r){return Array.isArray(e)?e.some(s=>h(this,d,Tt).call(this,s,r)):r instanceof RegExp?r.test(String(e)):String(e).toLocaleLowerCase().includes(r)},$t=function(e,r,s){if(Array.isArray(r)){for(let i of r)if(h(this,d,$t).call(this,e,i))return!0;return!1}return typeof s=="function"?s(e,r):r instanceof RegExp?r.test(String(e)):r===e},ne=function(e,r){if(typeof t(this,A)=="function")return t(this,A).call(this,e,r);for(let s of Object.keys(t(this,A)||{})){let i=t(this,A)[s],n=t(this,p)[s],f=n?n.filter:void 0,u=h(this,d,ft).call(this,e,s);if(!h(this,d,$t).call(this,u,i,f))return!1}return!0},ut=function(){let e=typeof t(this,A)=="function"?t(this,A):(i,n)=>h(this,d,ne).call(this,i,n),r=null,s=[];t(this,O)instanceof RegExp?(r=t(this,O),s=[r]):typeof t(this,O)=="string"&&(r=t(this,O).toLocaleLowerCase(),s=t(this,J).call(this,r)),l(this,E,t(this,X).filter((i,n)=>{if(i._metadata.searchScore=0,!e(i,n))return!1;if(!r)return!0;let u=[...this.columns.filter(g=>g.searchable).map(g=>g.field),...t(this,gt)];for(let g of u){let b=t(this,p)[g];if(b&&b.tokenize){let m=i._metadata[`_${g}_tokens`]||[];for(let v of s)h(this,d,Tt).call(this,m,v)&&(typeof v=="string"?i._metadata.searchScore+=v.length:i._metadata.searchScore++)}else{let m=h(this,d,ft).call(this,i,g);h(this,d,Tt).call(this,m,r)&&(typeof r=="string"?i._metadata.searchScore+=r.length:i._metadata.searchScore++)}}return i._metadata.searchScore>0})),h(this,d,St).call(this),h(this,d,mt).call(this),t(this,C).dispatchEvent(new CustomEvent(z.Events.ROWS_CHANGED,{bubbles:!0,cancelable:!0}))},oe=function(e,r,s){let i,n;if(s.sortOrder==="asc"?(i=e._metadata[`_${s.field}_sort`],n=r._metadata[`_${s.field}_sort`]):s.sortOrder==="desc"&&(i=r._metadata[`_${s.field}_sort`],n=e._metadata[`_${s.field}_sort`]),typeof s.sorter=="function"){let f=s.sorter(i,n);if(f!==0)return f}return i<n?-1:i>n?1:0},St=function(){let e=this.columns.filter(r=>!r.element.hidden&&typeof r.sortPriority=="number").sort((r,s)=>{let i=typeof r.sortPriority=="number"?r.sortPriority:0,n=typeof s.sortPriority=="number"?s.sortPriority:0;return i-n});t(this,E).sort((r,s)=>{let i=r._metadata.searchScore||0,n=s._metadata.searchScore||0;if(i>n)return-1;if(i<n)return 1;for(let f of e){let u=h(this,d,oe).call(this,r,s,f);if(u!==0)return u}return r._metadata.index-s._metadata.index}),h(this,d,mt).call(this)},K=function(){var r,s,i,n,f,u,g;for(let b of Object.keys(t(this,p))){let m=t(this,p)[b];(r=m.element.parentElement)==null||r.append(m.element),m.element.hidden=!m.visible,m.element.style.width==""&&(m.element.style.width=m.element.offsetWidth+"px"),m.sortOrder==="asc"?((s=m.element)==null||s.classList.add("dt-ascending"),(i=m.element)==null||i.classList.remove("dt-descending")):m.sortOrder==="desc"?((n=m.element)==null||n.classList.add("dt-descending"),(f=m.element)==null||f.classList.remove("dt-ascending")):((u=m.element)==null||u.classList.remove("dt-ascending"),(g=m.element)==null||g.classList.remove("dt-descending"))}let e=this.columns.filter(b=>b.visible).slice(-1)[0];e&&(console.log("lastCol",e),e.element.style.width="")},mt=function(){if(t(this,L).innerHTML="",t(this,E).length){let e=!1;if(t(this,E).length>=t(this,j))try{t(this,H).rowCount=t(this,E).length,t(this,H).start(),e=!0}catch(r){r instanceof ot&&(console.warn("Failed to start virtual scroll... falling back to standard rendering"),console.warn(r.stack))}if(!e){if(t(this,E).length>ie){let s=ie.toLocaleString();console.warn(`Virtual scroll disabled with more than ${s} rows... Good luck with that!`)}t(this,H)&&t(this,H).stop();let r=t(this,E).map((s,i)=>h(this,d,It).call(this,i));t(this,L).append(...r)}}else t(this,X).length===0?this.showMessage(t(this,Ct),"dt-empty"):this.showMessage(t(this,wt),"dt-empty")},ae=function(e,r,s,i){typeof s.valueFormatter=="function"&&(r=s.valueFormatter(r,i)),e.innerText=r==null?"-":r,typeof s.elementFormatter=="function"&&s.elementFormatter(r,i,e),t(this,pt)&&t(this,O)&&t(this,O)!=""&&s.searchable&&(e.innerHTML=e.innerText.replace(new RegExp(t(this,O),"i"),n=>`<mark>${n}</mark>`)),e.hidden=!s.visible},It=function(e){let r=t(this,E)[e],s=document.createElement("tr");s.classList.add(...B(t(this,S).tr)),s.dataset.dtIndex=String(e);for(let i of Object.keys(t(this,p))){let n=h(this,d,ft).call(this,r,i),f=t(this,p)[i],u=document.createElement("td");u.classList.add(...B(t(this,S).td)),u.dataset.dtField=i,h(this,d,ae).call(this,u,n,f,r),s.append(u)}return typeof t(this,st)=="function"&&t(this,st).call(this,r,s),s},ft=function(e,r){let s=r.split("."),i=e;for(let n of s)if(i&&typeof i=="object")i=i[n];else return;return i},xt=new WeakMap,Et=new WeakMap,vt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,Mt=new WeakMap,Rt=new WeakMap,zt=new WeakMap,_t=new WeakMap,z.Events={ROW_CLICK:"dt.row.click",ROWS_CHANGED:"dt.rows.changed",COL_HIDE:"dt.col.hide",COL_SHOW:"dt.col.show",COL_SORT:"dt.col.sort",COL_RESIZE:"dt.col.resize",COL_REARRANGE:"dt.col.rearrange"};var I=z,ie=1e4;var P,Y,k,Nt=class{constructor(e,r,s){o(this,P);o(this,Y);o(this,k,{saveColumnSorting:!0,saveColumnVisibility:!0,saveColumnWidth:!0,saveColumnOrder:!0});l(this,P,e),l(this,Y,r),l(this,k,tt(tt({},t(this,k)),s)),this.restoreState();let i=e.table;t(this,k).saveColumnSorting&&i.addEventListener(I.Events.COL_SORT,()=>this.saveState()),t(this,k).saveColumnVisibility&&(i.addEventListener(I.Events.COL_HIDE,()=>this.saveState()),i.addEventListener(I.Events.COL_SHOW,()=>this.saveState())),t(this,k).saveColumnWidth&&i.addEventListener(I.Events.COL_RESIZE,()=>this.saveState()),t(this,k).saveColumnOrder&&i.addEventListener(I.Events.COL_REARRANGE,()=>this.saveState())}saveState(){let e=t(this,P).columns.map(r=>({field:r.field,sortOrder:r.sortOrder,sortPriority:r.sortPriority,visible:!r.element.hidden,width:r.element.style.width}));localStorage.setItem(t(this,Y),JSON.stringify(e))}restoreState(){let e=localStorage.getItem(t(this,Y));if(e)try{let r=JSON.parse(e),s=t(this,P).columns;r.forEach(i=>{let n=s.find(f=>f.field===i.field);n&&(t(this,k).saveColumnSorting&&(n.sortOrder=i.sortOrder,n.sortPriority=i.sortPriority),t(this,k).saveColumnVisibility&&t(this,P).setColumnVisibility(n.field,i.visible),t(this,k).saveColumnWidth&&(n.element.style.width=i.width))}),t(this,k).saveColumnOrder&&t(this,P).setColumnOrder(r.map(i=>i.field)),t(this,P).refresh()}catch(r){console.error("Failed to restore DataTable state:",r)}}clearState(){localStorage.removeItem(t(this,Y))}};P=new WeakMap,Y=new WeakMap,k=new WeakMap;return me(fe);})();
//# sourceMappingURL=datatable.global.js.map